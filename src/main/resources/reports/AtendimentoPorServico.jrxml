<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.4.3.final using JasperReports Library version 6.4.3  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="AtendimentoPorServico" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isSummaryWithPageHeaderAndFooter="true" uuid="f9a66300-ef67-4251-abce-a58d78432b2e">
	<property name="ireport.zoom" value="1.3310000000000004"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Sics PostGres Dev"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<style name="Crosstab_CH" mode="Opaque" backcolor="#F0FFFA">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CG" mode="Opaque" backcolor="#BFFFEA">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CT" mode="Opaque" backcolor="#60A78F">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<parameter name="dt_inicio" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="dt_fim" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="localizacao" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="fila" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="nomeHospital" class="java.lang.String"/>
	<parameter name="logo_cliente" class="java.io.InputStream"/>
	<queryString>
		<![CDATA[select distinct f.localizacao, a.id_fila, f.nome as nome_fila, a.tipo_senha,
case a.tipo_senha
   when 'N' then 'Normal'
   when 'P' then 'Prioridade'
   else 'Prior. Especial'
end as tipo_prioridade,
case a.status_senha
   when 'C' then 'Cancelada'
   else 'Atendida'
end as status_senha,
a.id_atendimento
from atendimento a
inner join fila f on f.id_fila = a.id_fila
where a.status_senha in ('C', 'I')
and ((a.dt_atendimento is null and a.dt_senha between $P{dt_inicio} and $P{dt_fim}) or
(a.dt_atendimento is not null and a.dt_atendimento between $P{dt_inicio} and $P{dt_fim}))
and ($P{localizacao} = '*' or f.localizacao = $P{localizacao})
and ($P{fila} = -1 or a.id_fila = $P{fila})
order by f.localizacao, nome_fila, status_senha desc, a.tipo_senha desc]]>
	</queryString>
	<field name="localizacao" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="localizacao"/>
	</field>
	<field name="id_fila" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="id_fila"/>
	</field>
	<field name="nome_fila" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nome_fila"/>
	</field>
	<field name="tipo_senha" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="tipo_senha"/>
	</field>
	<field name="tipo_prioridade" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="tipo_prioridade"/>
	</field>
	<field name="status_senha" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="status_senha"/>
	</field>
	<field name="id_atendimento" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.label" value="id_atendimento"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="160" splitType="Stretch">
			<textField>
				<reportElement x="0" y="75" width="802" height="25" uuid="dd4974f4-2bf9-4772-accc-e35cfcae5ad0"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="16" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{nomeHospital}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement mode="Opaque" x="0" y="100" width="802" height="25" backcolor="#00CC99" uuid="4b357204-41c0-42d7-a202-512b07ff269a"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Black" size="16"/>
				</textElement>
				<text><![CDATA[RELATÓRIO DE ATENDIMENTOS X LOCALIZAÇÃO E SERVIÇO]]></text>
			</staticText>
			<staticText>
				<reportElement x="546" y="30" width="100" height="20" uuid="59b7a119-1d73-40d5-8a15-a3d98b403e19"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Emissão ]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm">
				<reportElement x="646" y="30" width="150" height="20" uuid="3901cd09-3993-4c5d-a6eb-6c2e93ded5b0"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="546" y="50" width="100" height="20" uuid="c6d99aad-3b07-4124-85f9-61f9b294a3dd"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Período de ]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH.mm.ss">
				<reportElement x="646" y="50" width="150" height="20" uuid="68f48511-8cc1-400a-a712-3afa9938a1a6"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[new SimpleDateFormat("dd/MM/yyyy").format($P{dt_inicio}) + " a " +
new SimpleDateFormat("dd/MM/yyyy").format($P{dt_fim})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="130" width="200" height="20" uuid="4ef1728d-4d6c-4451-adb4-16653f1d02c8">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[LOCALIZAÇÃO]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="130" width="250" height="20" uuid="7fc46140-1fb5-4605-9409-66503cbe5d10">
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[SERVIÇO]]></text>
			</staticText>
			<staticText>
				<reportElement x="450" y="130" width="352" height="20" uuid="715e9165-79d7-44e6-bc8c-20ae66ccdc08">
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[TIPO DE PRIORIDADE / SITUAÇÃO]]></text>
			</staticText>
			<image scaleImage="RetainShape" isUsingCache="true" isLazy="true">
				<reportElement x="0" y="0" width="160" height="75" uuid="86f77141-da8e-429d-abfe-e5dd76aee44a"/>
				<imageExpression><![CDATA[$P{logo_cliente}]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<pageFooter>
		<band height="30" splitType="Stretch">
			<line>
				<reportElement x="0" y="0" width="802" height="1" uuid="53c3f15e-1a44-4a7c-a091-67201afdde99"/>
			</line>
			<textField>
				<reportElement x="682" y="1" width="80" height="20" uuid="79666a4b-e33b-4ce7-b788-010316e06a29"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="762" y="1" width="40" height="20" uuid="7af1967b-6d41-4cbb-95b4-fccb17e427c8"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="130" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<crosstab>
				<reportElement x="0" y="0" width="802" height="110" uuid="e60f2949-1e37-4df0-8336-4020d57e1a75">
					<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
					<property name="com.jaspersoft.studio.crosstab.style.header" value="Crosstab_CH"/>
					<property name="com.jaspersoft.studio.crosstab.style.group" value="Crosstab_CG"/>
					<property name="com.jaspersoft.studio.crosstab.style.total" value="Crosstab_CT"/>
					<property name="com.jaspersoft.studio.crosstab.style.detail" value="Crosstab_CD"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<rowGroup name="localizacao" width="200" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{localizacao}]]></bucketExpression>
					</bucket>
					<crosstabRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CH">
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<textField>
								<reportElement x="0" y="0" width="200" height="60" uuid="af636ba6-785d-4118-a0fd-cc9b4f5bb7b0"/>
								<box leftPadding="5"/>
								<textFieldExpression><![CDATA[$V{localizacao}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabRowHeader>
					<crosstabTotalRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CT">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<staticText>
								<reportElement x="0" y="0" width="530" height="20" uuid="22c9674e-85c1-42b2-9b50-bbc903b8b608"/>
								<box leftPadding="5"/>
								<text><![CDATA[Total da Localização]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalRowHeader>
				</rowGroup>
				<rowGroup name="nome_fila" width="250" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{nome_fila}]]></bucketExpression>
					</bucket>
					<crosstabRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CH">
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<textField>
								<reportElement x="0" y="0" width="250" height="40" uuid="f7fe0f17-9a88-471b-8d0c-a9ee2d6620d9"/>
								<box leftPadding="5"/>
								<textFieldExpression><![CDATA[$V{nome_fila}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabRowHeader>
					<crosstabTotalRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CG">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<staticText>
								<reportElement x="0" y="0" width="330" height="20" uuid="ec87645d-11e6-4304-8651-97a6868728a0"/>
								<box leftPadding="5"/>
								<text><![CDATA[Total do Serviço]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalRowHeader>
				</rowGroup>
				<rowGroup name="tipo_prioridade" width="80" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{tipo_prioridade}]]></bucketExpression>
					</bucket>
					<crosstabRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CH">
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<textField>
								<reportElement x="0" y="0" width="80" height="20" uuid="90d45a37-9582-40ed-bf71-30cf2613fa51"/>
								<box leftPadding="5"/>
								<textElement textAlignment="Left"/>
								<textFieldExpression><![CDATA[$V{tipo_prioridade}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabRowHeader>
					<crosstabTotalRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CG">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<staticText>
								<reportElement x="0" y="0" width="80" height="20" uuid="ae3c64a6-69d9-4627-bb2c-edf24a0093ec"/>
								<box leftPadding="5"/>
								<text><![CDATA[Total do Tipo]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalRowHeader>
				</rowGroup>
				<columnGroup name="status_senha" height="20" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{status_senha}]]></bucketExpression>
					</bucket>
					<crosstabColumnHeader>
						<cellContents mode="Opaque" style="Crosstab_CH">
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<box leftPadding="0" rightPadding="5"/>
							<textField>
								<reportElement x="0" y="0" width="75" height="20" uuid="e66ebcfc-4b8f-4f78-8be2-33fca3b674e4"/>
								<textElement textAlignment="Right"/>
								<textFieldExpression><![CDATA[$V{status_senha}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabColumnHeader>
					<crosstabTotalColumnHeader>
						<cellContents mode="Opaque" style="Crosstab_CT">
							<property name="com.jaspersoft.studio.unit.width" value="px"/>
							<box leftPadding="0" rightPadding="5"/>
							<staticText>
								<reportElement x="0" y="0" width="75" height="20" uuid="da1ad997-00e2-4331-b5de-7dcd363a9f7d"/>
								<textElement textAlignment="Right"/>
								<text><![CDATA[Total Situação]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalColumnHeader>
				</columnGroup>
				<measure name="id_atendimento_MEASURE" class="java.lang.Integer" calculation="Count">
					<measureExpression><![CDATA[$F{id_atendimento}]]></measureExpression>
				</measure>
				<crosstabCell width="80" height="20">
					<cellContents mode="Opaque" style="Crosstab_CD">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="c163e034-3612-4069-aa5a-03a5d947d77b"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" columnTotalGroup="status_senha">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="343f9c23-2c40-4f5c-90eb-24debd57483e"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" rowTotalGroup="localizacao">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="597ea07f-e405-459c-8b52-8c3251c0886a"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" rowTotalGroup="localizacao" columnTotalGroup="status_senha">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="e767f37d-49bc-4ec5-b307-fd3ad10c87f1"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" rowTotalGroup="nome_fila">
					<cellContents mode="Opaque" style="Crosstab_CG">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="3aa1bc3c-f8b1-4abd-8611-b995741d1430"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" rowTotalGroup="nome_fila" columnTotalGroup="status_senha">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="262083a5-081c-4315-8870-19f0bb0e9b65"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" rowTotalGroup="tipo_prioridade">
					<cellContents mode="Opaque" style="Crosstab_CG">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="91e9dbde-0598-48d1-bb08-92d771fa941f"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="80" height="20" rowTotalGroup="tipo_prioridade" columnTotalGroup="status_senha">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField pattern="#,##0.###">
							<reportElement x="0" y="0" width="80" height="20" uuid="b7d9e868-000a-4507-848e-3eacbc8a0b95"/>
							<box leftPadding="0" rightPadding="5"/>
							<textElement textAlignment="Right"/>
							<textFieldExpression><![CDATA[$V{id_atendimento_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
			</crosstab>
		</band>
	</summary>
	<noData>
		<band height="50">
			<staticText>
				<reportElement x="0" y="0" width="802" height="50" uuid="4319f04b-5a35-4f7e-b7f4-07c54db9a8a5"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial Black" size="20"/>
				</textElement>
				<text><![CDATA[Não existem informações a serem impressas]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
